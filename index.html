<!DOCTYPE html>

<html manifest='app.manifest'>
    <head>
        <link rel="manifest" href="manifest.json">    
        <meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=no">
        <style>
            * {
                font-family: sans-serif;
            }
            #body {
                width: 100%;
                height: 100%;
            }
            img {
                width: 128px;
            }
        </style>
    </head>
    <body style="text-align: center" >
        <div id="pwdScreen" style="display: none">
            Password: <input id="pwd"><button onclick="checkPwd()">Ok</button>
        </div>
        <div id="appScreen">
            <h1>PREMI!</h1>
            <div>
                <img class="button" src="images/red-button.png" onclick="playsound('tani')">
                <img class="button" src="images/yellow-button.png" onclick="playsound('roberto')">
            </div>
            </div>
        
        <script>
            const password = -1997151620;

            playsound = (directory) => {
                const MAX_FILES = 3; //Max files per directory
                let id = Math.floor(MAX_FILES * Math.random());
                let sound = new Audio('sounds/' + directory + '/' + id + '.mp3')
                sound.play();
            }

            checkPwd = () => {
                let pwd = document.getElementById('pwd').value;
                if (hashCode(pwd) == password) {
                    localStorage.setItem('pwd', password);
                }
                showHide();
            }

            showHide = () => {
                let app = document.getElementById('appScreen');
                let pwd = document.getElementById('pwdScreen');

                if (localStorage.getItem('pwd') == password) {
                    app.style.display = 'block';
                    pwd.style.display = 'none';
                } else {
                    pwd.style.display = 'block';
                    app.style.display = 'none';
                }
            }

            function hashCode(s) {
                for(var i = 0, h = 0; i < s.length; i++)
                    h = Math.imul(31, h) + s.charCodeAt(i) | 0;
                return h;
            }
        </script>
    </body>

</html>
